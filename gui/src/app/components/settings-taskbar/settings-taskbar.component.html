<div class="card text-white border-primary mb-3" style="height: 93vh;">
    <div class="row">
        <div class="inputs">
            <div class="row justify-content-around">
                <button class="btn-primary btn btn-lg col" type="button"
                    id="setting-btn" (click)="calculate()" [disabled]="!calculationAllowed()">
                    <span ngbTooltip="Type in radius or walking time to allow routing"
                        [disableTooltip]="calculationAllowed()">Calculate</span></button>
                <button type="button" class="btn btn-secondary btn-lg close col" (click)="close()">Close</button>
            </div>
            <ngb-accordion #acc="ngbAccordion" [closeOthers]="true" activeIds="radius">
                <ngb-panel id="radius" [title]="radius > 0 ? 'Radius: ' + radius + 'km' : 'Radius'" [disabled]="!startPointSet"
                    [class.disabled]="!startPointSet">
                    <ng-template ngbPanelContent >
                      <div class='d-flex justify-content-between col' style='gap: 10px'>
                        <input id='radiusInput' type="number" placeholder="Enter radius in km..." class="form-control"
                               [(ngModel)]="radius" />
                        <button class="btn-primary btn" id="refresh" type="submit" [disabled]='refreshing || !radius || radius <= 0'
                                (click)="refreshSights()" style='flex-grow:1;'>
                          <span *ngIf='!refreshing'>Refresh</span>
                          <div *ngIf='refreshing' class="spinner-border" role="status">
                          </div>
                        </button>
                      </div>
                    </ng-template>
                </ngb-panel>
                <ngb-panel
                    [title]="'Hike duration: ' + getMinutesBetweenStartAndEnd() + 'mins'"
                    [disabled]="!startPointSet">
                    <ng-template class="row" ngbPanelContent>
                        <div>
                            <h5>Start Time</h5>
                            <ngb-timepicker class="form-control"
                                [(ngModel)]="startTime"></ngb-timepicker>
                        </div>
                        <br>
                        <div>
                            <h5>End Time</h5>
                            <ngb-timepicker class="form-control"
                                [(ngModel)]="endTime"></ngb-timepicker>
                        </div>
                    </ng-template>
                </ngb-panel>
                <ngb-panel [title]="'Tags'" [disabled]="!startPointSet" (hidden)="hideAllSights()">
                    <ng-template class="row" ngbPanelContent>
                        <small *ngIf="!foundAnySights()"> No Sights were found. Please check your Settings and hit "Refresh"! </small>
                        <div *ngFor="let category of this.getCategories()">
                            <app-settings-taskbar-tag-item *ngIf="category.sights.length > 0" [category]="category"
                                                           (showSightEvent)="this.showSightEvent.emit($event)"
                                (checked)="drawSights($event, category)"></app-settings-taskbar-tag-item>
                        </div>

                    </ng-template>
                </ngb-panel>
            </ngb-accordion>

            <div *ngIf="!this.getLastRequest()" class="card" style="background-color: black; margin-top: 3vh; ">
                "start": {{startTime.hour}}:{{startTime.minute}}
                <br>
                "end": {{endTime.hour}}:{{startTime.minute}}
                <br>
                "radius": {{mapService.getRadius()}}km
                <br>
                "categories":
                <br>
                <div *ngFor="let category of categories" style="text-align: center;">
                    <div *ngIf="category.sights.length > 0">{{category.name}}: {{category.pref}}</div>
                </div>
            </div>
            <div *ngIf="this.getLastRequest()" class="card" style="background-color: black; margin-top: 3vh; ">
                "start": {{this.getLastRequest()!.start}}
                <br>
                "end": {{this.getLastRequest()!.end}}
                <br>
                "radius": {{this.getLastRequest()!.area.radius / 1000}}km
                <br>
                "categories":
                <br>
                <div *ngFor="let category of this.getLastRequest()!.user_prefs.categories" style="text-align: center;">
                  {{category.category}}: {{category.pref}}
                </div>
            </div>
        </div>

    </div>
</div>
